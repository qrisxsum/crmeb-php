(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-extension-customer_list-chat"],{"0e51":function(t,e,a){"use strict";a.r(e);var o=a("a3dc"),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e["default"]=i.a},"11fe":function(t,e,a){"use strict";a.r(e);var o=a("8f68"),i=a("0e51");for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("8744"),a("7380"),a("228f");var r,d=a("f0c5"),s=Object(d["a"])(i["default"],o["b"],o["c"],!1,null,"5e1411aa",null,!1,o["a"],r);e["default"]=s.exports},"228f":function(t,e,a){"use strict";var o=a("7b93"),i=a.n(o);i.a},"29d7":function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,"\nuni-page-body[data-v-5e1411aa],\nuni-page-body[data-v-5e1411aa],\nhtml[data-v-5e1411aa],\nbody[data-v-5e1411aa]{height:100%}\n",""]),t.exports=e},"6a91":function(t,e,a){"use strict";var o=a("4ea4");a("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.getProductDetail=n,e.getProductCode=r,e.collectAdd=d,e.collectDel=s,e.postCartAdd=c,e.getCategoryList=l,e.getProductslist=u,e.getProductHot=f,e.collectAll=p,e.getGroomList=h,e.getCollectUserList=m,e.getReplyList=g,e.getReplyConfig=v,e.getSearchKeyword=b,e.storeListApi=_,e.storeDiscountsList=x,e.postCartNum=w,e.create=y,e.getAgentAgreement=j,e.registerVerify=I,e.getCodeApi=k,e.getHistoryData=C,e.getAttr=$,e.getHomeProducts=L,e.getPresellProductDetail=T,e.getVisitList=S,e.deleteVisitList=O,e.userSpreadInfo=P,e.spreadCreateApi=A,e.realPrice=M;var i=o(a("06e0"));function n(t){return i.default.get("product/detail/"+t,{},{noAuth:!0})}function r(t){return i.default.get("product/code/"+t,{},{noAuth:!0})}function d(t,e){return i.default.post("collect/add",{id:t,product:void 0===e?"product":e})}function s(t,e){return i.default.post("collect/del",{id:t,category:void 0===e?"product":e})}function c(t){return i.default.post("cart/add",t)}function l(){return i.default.get("category",{},{noAuth:!0})}function u(t){return i.default.get("products",t,{noAuth:!0})}function f(t,e){return i.default.get("product/hot",{page:void 0===t?1:t,limit:void 0===e?4:e},{noAuth:!0})}function p(t,e){return i.default.post("collect/all",{id:t,category:void 0===e?"product":e})}function h(t,e){return i.default.get("groom/list/"+t,e,{noAuth:!0})}function m(t){return i.default.get("collect/user",t)}function g(t,e){return i.default.get("reply/list/"+t,e)}function v(t){return i.default.get("reply/config/"+t)}function b(){return i.default.get("search/keyword",{},{noAuth:!0})}function _(t){return i.default.get("store_list",t)}function x(t){return i.default.get("store_discounts/list/"+t,{},{noAuth:!0})}function w(t){return i.default.post("v2/set_cart_num",t)}function y(t){return i.default.post("agent/apply/".concat(t.id),t)}function j(t){return i.default.get("agent/get_agent_agreement",{},{noAuth:!0})}function I(t){return i.default.post("register/verify",t,{noAuth:!0})}function k(){return i.default.get("verify_code",{},{noAuth:!0})}function C(){return i.default.get("agent/apply/info",{},{noAuth:!0})}function $(t,e){return i.default.get("v2/get_attr/"+t+"/"+e)}function L(t){return i.default.get("home/products",t,{noAuth:!0})}function T(t){return i.default.get("advance/detail/"+t)}function S(t){return i.default.get("user/visit_list",t)}function O(t){return i.default.delete("user/visit",t)}function P(){return i.default.get("user/spread/apply/info")}function A(t,e){return i.default.post("user/spread/apply/".concat(t),e)}function M(t,e){return i.default.get("product/real_price/".concat(t,"/").concat(e),{},{noAuth:!0})}},7380:function(t,e,a){"use strict";var o=a("e3d7"),i=a.n(o);i.a},"7b93":function(t,e,a){var o=a("b683");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("4f06").default;i("7f577f75",o,!0,{sourceMap:!1,shadowMode:!1})},"7ecf":function(t,e,a){var o=a("29d7");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("4f06").default;i("c0e46792",o,!0,{sourceMap:!1,shadowMode:!1})},"7fc0":function(t,e,a){"use strict";var o=a("4ea4");a("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.getCartCounts=n,e.getCartList=r,e.getResetCart=d,e.changeCartNum=s,e.cartDel=c,e.getOrderList=l,e.orderProduct=u,e.orderComment=f,e.orderPay=p,e.refundOrderDel=h,e.orderData=m,e.orderCancel=g,e.orderDel=v,e.getGiftOrderDetail=b,e.getOrderDetail=_,e.getRefundOrderDetail=x,e.orderAgain=w,e.orderTake=y,e.express=j,e.adminExpress=I,e.ordeRefundReason=k,e.orderRefundVerify=C,e.orderConfirm=$,e.checkShipping=L,e.getCouponsOrderPrice=T,e.orderCreate=S,e.postOrderComputed=O,e.orderCoupon=P,e.offlineCheckPrice=A,e.offlineCreate=M,e.orderOfflinePayType=U,e.orderInvoiceList=z,e.orderInvoiceDetail=E,e.aliPay=D,e.refundExpress=R,e.vcartList=H,e.refundGoodsList=G,e.postRefundGoods=B,e.returnGoodsSubmit=W,e.getNewOrderList=N,e.refundOrderDetail=q,e.cancelRefundOrder=F,e.getCashierOrder=V,e.getInvoiceLink=Y,e.orderReceiveGift=Q;var i=o(a("06e0"));function n(t){return i.default.get("cart/count",{numType:void 0===t?0:t})}function r(t){return i.default.get("cart/list",t)}function d(t){return i.default.post("v2/reset_cart",t)}function s(t,e){return i.default.post("cart/num",{id:t,number:e})}function c(t){return"object"===typeof t&&(t=t.join(",")),i.default.post("cart/del",{ids:t})}function l(t){return i.default.get("order/list",t)}function u(t){return i.default.post("order/product",{unique:t})}function f(t){return i.default.post("order/comment",t)}function p(t){return i.default.post("order/pay",t)}function h(t){return i.default.get("order/refund/del/"+t,{})}function m(){return i.default.get("order/data")}function g(t){return i.default.post("order/cancel",{id:t})}function v(t){return i.default.post("order/del",{uni:t})}function b(t){return i.default.get("order/gift_detail/"+t)}function _(t,e){return i.default.get("order/detail/"+t+"".concat(e?"/".concat(e):""))}function x(t,e){return i.default.get("order/refund_detail/"+t+"".concat(e?"/".concat(e):""))}function w(t){return i.default.post("order/again",{uni:t})}function y(t){return i.default.post("order/take",{uni:t})}function j(t,e){return i.default.get("order/express/"+t+"".concat(e?"/refund":""))}function I(t,e){return i.default.get("admin/order/express/"+t+"".concat(e?"/refund":""))}function k(){return i.default.get("order/refund/reason")}function C(t){return i.default.post("order/refund/verify",t)}function $(t){return i.default.post("order/confirm",t)}function L(t,e){return i.default.post("order/check_shipping",{cartId:t,new:e})}function T(t,e){return i.default.get("coupons/order/"+t,e)}function S(t,e){return i.default.post("order/create/"+t,e)}function O(t,e){return i.default.post("order/computed/"+t,e)}function P(t){return i.default.post("v2/order/product_coupon/"+t)}function A(t){return i.default.post("order/offline/check/price",t)}function M(t){return i.default.post("order/offline/create",t)}function U(){return i.default.get("order/offline/pay/type")}function z(t){return i.default.get("v2/order/invoice_list",t)}function E(t){return i.default.get("v2/order/invoice_detail/".concat(t))}function D(t,e){return i.default.get("ali_pay",{key:t,quitUrl:e},{noAuth:!0})}function R(t){return i.default.post("order/refund/express",t)}function H(){return i.default.get("v2/cart_list")}function G(t){return i.default.get("order/refund/cart_info/".concat(t))}function B(t){return i.default.post("order/refund/cart_info",t)}function W(t,e){return i.default.post("order/refund/apply/".concat(t),e)}function N(t){return i.default.get("order/refund/list",t)}function q(t){return i.default.get("order/refund/detail/"+t)}function F(t){return i.default.post("order/refund/cancel/"+t)}function V(t,e){return i.default.get("order/cashier/".concat(t,"/").concat(e))}function Y(t){return i.default.get("v2/order/down_invoice/".concat(t))}function Q(t,e){return i.default.post("order/receive_gift/"+t,e)}},8744:function(t,e,a){"use strict";var o=a("7ecf"),i=a.n(o);i.a},"8f68":function(t,e,a){"use strict";var o;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"chat-box",style:t.colorStyle},[a("v-uni-view",{staticClass:"broadcast-details_order"},[t.productId&&t.productInfo.id?a("v-uni-view",{staticClass:"broadcast-details_box"},[a("v-uni-view",{staticClass:"broadcast_details_img"},[a("v-uni-image",{staticClass:"goods-img",attrs:{src:t.productInfo.image}})],1),a("v-uni-view",{staticClass:"broadcast_details_picBox"},[a("v-uni-view",{staticClass:"broadcast_details_tit",domProps:{textContent:t._s(t.productInfo.store_name)}}),a("v-uni-view",{staticClass:"acea-row row-between"},[a("v-uni-view",{staticClass:"broadcast_details_pic"},[t._v(t._s(t.$t("￥"))+t._s(t.productInfo.price)),t.productInfo.ot_price?a("v-uni-text",{staticClass:"broadcast_details_pic_num"},[t._v(t._s(t.$t("￥"))+t._s(t.productInfo.ot_price))]):t._e()],1),a("v-uni-view",{staticClass:"broadcast_details_btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendProduct.apply(void 0,arguments)}}},[t._v(t._s(t.$t("发送客服")))])],1)],1)],1):t._e(),t.orderId&&t.orderInfo.id?a("v-uni-view",{staticClass:"broadcast_box"},[a("v-uni-view",{staticClass:"broadcast-details_num broadcast_num"},[a("v-uni-text",[t._v(t._s(t.$t("订单号"))+"："+t._s(t.orderInfo.order_id))]),a("v-uni-text",[t._v(t._s(t.orderInfo.add_time_y)+" "+t._s(t.orderInfo.add_time_h))])],1),a("v-uni-view",{staticClass:"broadcast-details_box"},[a("v-uni-view",{staticClass:"broadcast_details_img"},[a("v-uni-image",{staticClass:"goods-img",attrs:{src:t.orderInfo.cartInfo[0].productInfo.image}}),a("v-uni-view",{staticClass:"broadcast_details_model"},[t._v(t._s(t.orderInfo.cartInfo?t.orderInfo.cartInfo.length:0)+t._s(t.$t("件商品")))])],1),a("v-uni-view",{staticClass:"broadcast_details_picBox"},[a("v-uni-view",{staticClass:"broadcast_details_tit"},[t._v(t._s(t.orderInfo.cartInfo[0].productInfo.store_name))]),a("v-uni-view",{staticClass:"acea-row row-between"},[a("v-uni-view",{staticClass:"broadcast_details_pic"},[t._v(t._s(t.$t("￥"))+t._s(t.orderInfo.cartInfo[0].productInfo.price)),a("v-uni-text",{staticClass:"broadcast_details_pic_num"},[t._v(t._s(t.$t("￥"))+t._s(t.orderInfo.cartInfo[0].costPrice))])],1),a("v-uni-view",{staticClass:"broadcast_details_btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendOrder.apply(void 0,arguments)}}},[t._v(t._s(t.$t("发送客服")))])],1)],1)],1)],1):t._e()],1),a("v-uni-view",{staticClass:"chat-scroll-box"},[a("v-uni-scroll-view",{staticStyle:{height:"100%"},attrs:{"scroll-y":"true","scroll-top":t.scrollTop},on:{scrolltoupper:function(e){arguments[0]=e=t.$handleEvent(e),t.scrollToTop.apply(void 0,arguments)}}},[a("Loading",{attrs:{loaded:t.status,loading:t.loading}}),a("v-uni-view",{ref:"chat",staticClass:"chat",attrs:{id:"box"}},t._l(t.records,(function(e,o){return a("v-uni-view",{key:o,attrs:{id:"msg-"+e.id}},[e.show?a("v-uni-view",{staticClass:"day-box"},[t._v(t._s(e._add_time))]):t._e(),a("v-uni-view",{staticClass:"chat-item",class:{"right-box":e.uid==t.myUid}},[a("v-uni-image",{staticClass:"avatar",attrs:{src:e.avatar,mode:""}}),e.msn_type<=2?a("v-uni-view",{staticClass:"msg-box",domProps:{innerHTML:t._s(e.msn)}}):t._e(),3==e.msn_type?a("v-uni-view",{staticClass:"img-box"},[a("v-uni-image",{attrs:{src:e.msn,mode:"widthFix"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.previewImage(e.msn)}}})],1):t._e(),5==e.msn_type?a("v-uni-view",{staticClass:"product-box",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goProduct(e)}}},[a("v-uni-image",{attrs:{src:e.productInfo.image,mode:"widthFix"}}),a("v-uni-view",{staticClass:"info"},[a("v-uni-view",{staticClass:"price"},[a("v-uni-text",[t._v(t._s(t.$t("￥")))]),t._v(t._s(e.productInfo.price))],1),a("v-uni-view",{staticClass:"name line2"},[t._v(t._s(e.productInfo.store_name))])],1)],1):t._e(),6==e.msn_type&&e.orderInfo?a("v-uni-view",{staticClass:"order-box",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goOrder(e)}}},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(t.$t("订单号"))+": "+t._s(e.orderInfo.order_id))]),a("v-uni-view",{staticClass:"info"},[a("v-uni-image",{attrs:{src:e.orderInfo.cartInfo[0].productInfo.image}}),a("v-uni-view",{staticClass:"product-info"},[a("v-uni-view",{staticClass:"name line2"},[t._v(t._s(e.orderInfo.cartInfo[0].productInfo.store_name))]),a("v-uni-view",{staticClass:"price"},[t._v(t._s(t.$t("￥"))+t._s(e.orderInfo.cartInfo[0].productInfo.price))])],1)],1)],1):t._e()],1)],1)})),1)],1)],1),a("v-uni-view",{staticClass:"footer-box"},[a("v-uni-view",{staticClass:"words",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadImg.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"iconfont icon-tupian"})],1),a("v-uni-view",{staticClass:"input-box"},[a("v-uni-input",{attrs:{type:"text",placeholder:t.$t("请输入内容"),"confirm-type":"send"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.sendText.apply(void 0,arguments)}},model:{value:t.con,callback:function(e){t.con=e},expression:"con"}}),a("v-uni-text",{staticClass:"iconfont icon-fasong",class:{isSend:t.isSend},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendText.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"emoji",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isSwiper=!t.isSwiper}}},[a("span",{staticClass:"iconfont icon-biaoqing"})])],1),t.isSwiper?a("v-uni-view",{staticClass:"banner slider-banner"},[t.emojiGroup.length>0?a("v-uni-swiper",{staticClass:"swiper-wrapper",attrs:{autoplay:t.autoplay,circular:t.circular,interval:t.interval,duration:t.duration}},[t._l(t.emojiGroup,(function(e,o){return[a("v-uni-swiper-item",t._l(e,(function(e){return a("i",{key:e,staticClass:"em",class:e,style:"background-image:url("+t.httpUrl+")",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.addEmoji(e)}}})})),0)]}))],2):t._e()],1):t._e(),t.canvasStatus?a("v-uni-canvas",{style:{width:t.canvasWidth+"px",height:t.canvasHeight+"px",position:"absolute",left:"-100000px",top:"-100000px"},attrs:{"canvas-id":"canvas"}}):t._e()],1)},n=[]},"8fd4":function(t,e,a){"use strict";a.r(e);var o=a("bf4c"),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e["default"]=i.a},"9b36":function(t,e,a){var o=a("aa27");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("4f06").default;i("020e69d0",o,!0,{sourceMap:!1,shadowMode:!1})},"9c7d":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=["em-tlj-1","em-tlj-3","em-tlj-4","em-tlj-5","em-tlj-6","em-tlj-7","em-tlj-8","em-tlj-9","em-tlj-10","em-tlj-11","em-tlj-12","em-tlj-13","em-tlj-14","em-tlj-15","em-tlj-16","em-tlj-17","em-tlj-18","em-tlj-19","em-tlj-20","em-tlj-21","em-tlj-22","em-tlj-23","em-tlj-24","em-tlj-25","em-tlj-26","em-tlj-27","em-tlj-28","em-tlj-29","em-tlj-30","em-tlj-31","em-tlj-32","em-tlj-33","em-tlj-34","em-tlj-35","em-tlj-36","em-tlj-37","em-tlj-38","em-tlj-39","em-tlj-40","em-tlj-41","em-tlj-42","em-tlj-43","em-tlj-44","em-tlj-45","em-tlj-46","em-tlj-47","em-tlj-48","em-tlj-49","em-tlj-50","em-tlj-51","em-tlj-52","em-tlj-53","em-tlj-54","em-tlj-55","em-tlj-56","em-tlj-57","em-tlj-58","em-tlj-59","em-tlj-60","em-tlj-61","em-tlj-62","em-tlj-63","em-tlj-64","em-tlj-65","em-tlj-66","em-tlj-67","em-tlj-68","em-tlj-69","em-tlj-70","em-tlj-71","em-tlj-72","em-tlj-73","em-tlj-74","em-tlj-75","em-tlj-76","em-tlj-77","em-tlj-78","em-tlj-79","em-tlj-80","em-tlj-81","em-tlj-82","em-tlj-83","em-tlj-84","em-tlj-85","em-tlj-86","em-tlj-87","em-tlj-88","em-tlj-89","em-tlj-90","em-tlj-91","em-tlj-92","em-tlj-93","em-tlj-94","em-tlj-95","em-tlj-96"];e.default=o},a3dc:function(t,e,a){"use strict";var o=a("4ea4");a("99af"),a("4160"),a("baa5"),a("d81d"),a("acd8"),a("e25e"),a("ac1f"),a("5319"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(a("2909")),n=a("2094"),r=a("6a91"),d=a("7fc0"),s=(o(a("3064")),o(a("9c7d"))),c=o(a("e5d3")),l=o(a("4798")),u=a("0dd8"),f=getApp(),p=uni.getSystemInfoSync().statusBarHeight+"px",h=function(t,e){e=1*e||1;var a=[];return t.forEach((function(t,o){o%e===0&&a.push([]),a[a.length-1].push(t)})),a},m={name:"adminChat_index",data:function(){return{status:!1,loading:!1,sysHead:p,isTool:!1,isSwiper:!1,isWords:!1,autoplay:!1,circular:!0,interval:3e3,duration:500,emojiGroup:h(s.default,21),wordsList:[],con:"",toUid:0,limit:15,upperId:0,chatList:[],kefuInfo:{},scrollTop:0,active:!0,isScroll:!0,oldHeight:0,myUid:0,productId:0,productInfo:{},orderId:0,page:1,orderInfo:{},uidTo:0,titleName:"",chatStatus:!1,userType:0,canvasWidth:"",canvasHeight:"",canvasStatus:!1,httpUrl:""}},mixins:[l.default],components:{Loading:c.default},computed:{isSend:function(){return 0!=this.con.length},records:function(){var t=this;return this.chatList.map((function(e,a){return a?e.add_time-t.chatList[a-1].add_time>=300?e.show=!0:e.show=!1:e.show=!0,e}))}},onLoad:function(t){uni.showLoading({title:this.$t("客服连接中")}),this.myUid=this.$store.state.app.uid,this.toUid=t.to_uid,this.productId=parseInt(t.productId)||0,this.orderId=t.orderId||0,this.userType=t.type,this.getproductInfo(),this.getOrderInfo()},onUnload:function(){this.$socket.onClose(),uni.$off()},onReady:function(){var t=this;this.httpUrl="".concat(u.HTTP_REQUEST_URL,"/statics/images/look.png");var e=document.querySelector(".chat-box");e.style.height=window.innerHeight+"px";var a=function(){var e;f.globalData.isWsOpen?(t.$socket.send({data:{token:t.$store.state.app.token,form_type:t.$wechat.isWeixin()?1:3},type:"login"}),t.getChatList()):(e=t.$wechat.isWeixin()?1:3,t.$socket.onStart(t.$store.state.app.token,e));uni.$once("socketOpen",(function(){t.$socket.send({data:t.$store.state.app.token,form_type:t.$wechat.isWeixin()?1:3,type:"login"}),t.$nextTick((function(e){t.getChatList()}))}))};a(),uni.$on("to_transfer",(function(e){t.toUid=e.toUid,t.$socket.send({data:{id:t.toUid},type:"to_chat"}),t.chatList.forEach((function(a){a.uid!=t.myUid&&(a.avatar=e.avatar)}))})),uni.$once("timeout",(function(){uni.showLoading({title:"重连中",mask:!0}),t.chatList=[],a()})),uni.$once("success",(function(){t.$socket.init()})),uni.$on(["reply","chat"],(function(e){1==e.msn_type&&(e.msn=t.replace_em(e.msn)),e._add_time=e._add_time.substring(0,e._add_time.length-3),t.chatList.push(e),t.$nextTick((function(){t.height()}))})),uni.$on("socket_error",(function(){t.$util.Tips({title:t.$t("连接失败")})})),uni.$on("err_tip",(function(e){t.$util.Tips({title:e.msg})})),uni.$on("online",(function(e){0==e.online&&uni.showModal({title:t.$t("提示"),content:t.$t("客服已下线，是否需要反馈？"),success:function(t){t.confirm?uni.redirectTo({url:"/pages/columnGoods/HotNewGoods/feedback"}):t.cancel}})})),this.$nextTick((function(){t.height()}))},methods:{previewImage:function(t){uni.previewImage({urls:[t]})},goBack:function(){uni.navigateBack()},getproductInfo:function(){var t=this;this.productId&&(0,r.getProductDetail)(this.productId).then((function(e){t.productInfo=e.data.storeInfo}))},goProduct:function(t){uni.navigateTo({url:"/pages/goods_details/index?id=".concat(t.msn)})},goOrder:function(t){this.userType?uni.navigateTo({url:"/pages/admin/orderDetail/index?id=".concat(t.msn)}):uni.navigateTo({url:"/pages/goods/order_details/index?order_id=".concat(t.msn)})},getOrderInfo:function(){var t=this;this.orderId&&(0,d.getOrderDetail)(this.orderId).then((function(e){t.orderInfo=e.data,t.orderInfo.add_time_h&&(t.orderInfo.add_time_h=t.orderInfo.add_time_h.substring(0,t.orderInfo.add_time_h.lastIndexOf(":"))),t.orderInfo.cartInfo.length&&(t.cartInfo=t.orderInfo.cartInfo[0])}))},addEmoji:function(t){var e="[".concat(t,"]");this.con+=e},replace_em:function(t){return t=t.replace(/\[([^\[\]]+)\]/g,"<span class='em $1' style='background-image:url("+this.httpUrl+")'></span>"),t},getChatList:function(){var t=this;(0,n.getChatRecord)({limit:this.limit,uidTo:this.uidTo,toUid:this.toUid}).then((function(e){var a="";e.data.serviceList.length&&(a=0==t.uidTo?"#msg-".concat(e.data.serviceList[e.data.serviceList.length-1].id):"#msg-".concat(t.chatList.length?t.chatList[0].id:0));uni.hideLoading(),uni.setNavigationBarTitle({title:e.data.nickname}),t.titleName=e.data.nickname,t.toUid=e.data.uid,e.data.serviceList.forEach((function(e){e._add_time=e._add_time.substring(0,e._add_time.length-3),1!=e.msn_type&&2!=e.msn_type||(e.msn=t.replace_em(e.msn))})),t.loading=!1,t.chatList=[].concat((0,i.default)(e.data.serviceList),(0,i.default)(t.chatList)),t.$nextTick((function(){t.chatList.length&&(t.setPageScrollTo(a),t.isScroll=e.data.serviceList.length>=t.limit)})),t.$socket.send({data:{id:t.toUid},type:"to_chat"})})).catch((function(e){uni.hideLoading(),t.$util.Tips({title:e}),t.loading=!1,t.isScroll=!1,uni.redirectTo({url:"/pages/columnGoods/HotNewGoods/feedback"})}))},setPageScrollTo:function(t){var e=this,a=uni.createSelectorQuery().in(this).select(t);a.boundingClientRect((function(t){e.scrollTop=t?parseFloat(t.top)-60:0})).exec()},sendText:function(){if(!this.isSend)return this.$util.Tips({title:this.$t("请输入内容")});this.sendMsg(this.con,1),this.con=""},sendMsg:function(t,e){this.$socket.send({data:{msn:t,type:e,to_uid:this.toUid},form_type:this.$wechat.isWeixin()?1:3,type:"chat"})},uploadImg:function(){var t=this,e=this;e.canvasStatus=!0,e.$util.uploadImageChange("upload/image",(function(t){200==t.status&&e.sendMsg(t.data.url,3)}),(function(e){t.canvasStatus=!1}),(function(e){t.canvasWidth=e.w,t.canvasHeight=e.h}))},sendProduct:function(){this.sendMsg(this.productId,5),this.productId=0,this.productInfo={}},sendOrder:function(){this.sendMsg(this.orderId,6),this.orderId=0,this.orderInfo={}},height:function(){var t=this,e=0,a=uni.createSelectorQuery().select(".chat");setTimeout((function(o){a.boundingClientRect((function(a){e=a.height,t.active?t.scrollTop=parseInt(e)+500:t.scrollTop=parseInt(e)+100})).exec()}),200)},scrollToTop:function(){var t=this;this.isScroll&&(this.loading=!0,this.uidTo=this.chatList.length?this.chatList[0].id:0,this.isScroll=!1,setTimeout((function(e){t.getChatList()}),800))}}};e.default=m},aa27:function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,".Loads[data-v-71b32b65]{height:%?80?%;font-size:%?25?%;color:#000}.Loads .iconfont[data-v-71b32b65]{font-size:%?30?%;margin-right:%?10?%;height:%?32?%;line-height:%?32?%}\n/*加载动画*/@-webkit-keyframes load-data-v-71b32b65{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes load-data-v-71b32b65{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.loadingpic[data-v-71b32b65]{-webkit-animation:load-data-v-71b32b65 3s linear 1s infinite;animation:load-data-v-71b32b65 3s linear 1s infinite}.loading[data-v-71b32b65]{-webkit-animation:load-data-v-71b32b65 linear 1s infinite;animation:load-data-v-71b32b65 linear 1s infinite}",""]),t.exports=e},b299:function(t,e,a){"use strict";var o=a("9b36"),i=a.n(o);i.a},b683:function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,".em[data-v-5e1411aa]{display:inline-block;width:%?50?%;height:%?50?%;margin:%?40?% 0 0 %?50?%}.emoji-outer[data-v-5e1411aa]{position:absolute;right:%?50?%;bottom:%?30?%;width:%?50?%;height:%?50?%}",""]),t.exports=e},baa5:function(t,e,a){var o=a("23e7"),i=a("e58c");o({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},bf4c:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"Loading",props:{loaded:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}}};e.default=o},c9b4:function(t,e,a){"use strict";var o;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[t.loading&&!t.loaded?a("v-uni-view",{staticClass:"Loads acea-row row-center-wrapper",staticStyle:{"margin-top":".2rem"}},[t.loading?a("v-uni-view",[a("v-uni-view",{staticClass:"iconfont icon-jiazai loading acea-row row-center-wrapper"}),t._v(t._s(t.$t("正在加载中")))],1):a("v-uni-view",[t._v(t._s(t.$t("上拉加载更多")))])],1):t._e()],1)},n=[]},e3d7:function(t,e,a){var o=a("fc54");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("4f06").default;i("0983d142",o,!0,{sourceMap:!1,shadowMode:!1})},e5d3:function(t,e,a){"use strict";a.r(e);var o=a("c9b4"),i=a("8fd4");for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("b299");var r,d=a("f0c5"),s=Object(d["a"])(i["default"],o["b"],o["c"],!1,null,"71b32b65",null,!1,o["a"],r);e["default"]=s.exports},fc54:function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* crmeb颜色变量 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.chat-box[data-v-5e1411aa]{display:flex;flex-direction:column;height:100%;background:#f0f1f2;height:100vh}.chat-box .head-box[data-v-5e1411aa]{height:%?86?%;background:linear-gradient(85deg,#3875ea,#1890fc)}.chat-box .head-box .title-hd[data-v-5e1411aa]{display:flex;align-items:center;justify-content:center;position:relative;height:43px;padding:0 %?30?%;color:#fff}.chat-box .head-box .title-hd .icon-fanhui[data-v-5e1411aa]{position:absolute;left:%?30?%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.chat-box .scroll-box[data-v-5e1411aa]{flex:1}.chat-box .footer-box[data-v-5e1411aa]{display:flex;align-items:center;color:rgba(0,0,0,.8);background:#f7f7f7;padding:0 %?30?% %?15?% %?30?%;height:%?115?%}.chat-box .footer-box .words .icon-tupian[data-v-5e1411aa]{font-size:%?50?%}.chat-box .footer-box .input-box[data-v-5e1411aa]{display:flex;align-items:center;flex:1;height:%?64?%;padding-right:%?5?%;margin-left:%?18?%;background-color:#fff;border-radius:%?32?%}.chat-box .footer-box .input-box uni-input[data-v-5e1411aa]{flex:1;padding-left:%?20?%;height:100%;font-size:%?28?%;font-weight:400}.chat-box .footer-box .input-box .icon-fasong[data-v-5e1411aa]{font-size:%?50?%;color:#ccc;font-weight:400}.chat-box .footer-box .input-box .isSend[data-v-5e1411aa]{color:#3875ea}.chat-box .footer-box .emoji .icon-biaoqing[data-v-5e1411aa]{margin-left:%?18?%;font-size:%?50?%}.chat-box .footer-box .more .icon-gengduozhankai[data-v-5e1411aa]{margin-left:%?18?%;font-size:%?50?%}.tool-wrapper[data-v-5e1411aa]{display:flex;justify-content:space-between;padding:%?45?% %?60?%;background:#fff;font-size:%?24?%}.tool-wrapper .tool-item[data-v-5e1411aa]{text-align:center}.tool-wrapper .tool-item uni-image[data-v-5e1411aa]{width:%?104?%;height:%?104?%}.slider-banner[data-v-5e1411aa]{background:#fff;padding-bottom:%?0?%;padding-bottom:calc(constant(safe-area-inset-bottom));padding-bottom:calc(env(safe-area-inset-bottom))}.words-mask[data-v-5e1411aa]{z-index:50;position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,.5)}.words-mask .content[data-v-5e1411aa]{position:absolute;left:0;right:0;top:%?114?%;bottom:0;display:flex;flex-direction:column;padding:0 %?30?%;background:#fff;border-radius:%?6?% %?6?% 0 0}.words-mask .content .title-box[data-v-5e1411aa]{position:relative;height:%?125?%;line-height:%?125?%;text-align:center;font-size:%?32?%}.words-mask .content .title-box .icon-cha1[data-v-5e1411aa]{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.words-mask .content .scroll-box[data-v-5e1411aa]{flex:1;overflow:hidden}.words-mask .content .scroll-box .msg-item[data-v-5e1411aa]{padding:%?25?% 0;border-bottom:1px solid #eceff8}.chat-scroll-box[data-v-5e1411aa]{flex:1;padding:%?30?% %?30?% 0;overflow:hidden}.chat-scroll-box .chat-item[data-v-5e1411aa]{display:flex;margin-bottom:%?36?%;-webkit-user-select:auto}.chat-scroll-box .chat-item .avatar[data-v-5e1411aa]{width:%?80?%;height:%?80?%;border-radius:50%}.chat-scroll-box .chat-item .msg-box[data-v-5e1411aa]{display:flex;align-items:center;max-width:%?452?%;margin-left:%?22?%;padding:%?10?% %?24?%;background:#fff;border-radius:%?14?%;word-break:break-all;-webkit-user-select:auto}.chat-scroll-box .chat-item .img-box[data-v-5e1411aa]{width:%?270?%;margin-left:%?22?%}.chat-scroll-box .chat-item .img-box uni-image[data-v-5e1411aa]{width:%?270?%}.chat-scroll-box .chat-item .product-box[data-v-5e1411aa]{width:%?452?%;margin-left:%?22?%;background-color:#fff;border-radius:%?14?%;overflow:hidden}.chat-scroll-box .chat-item .product-box uni-image[data-v-5e1411aa]{width:%?452?%}.chat-scroll-box .chat-item .product-box .info[data-v-5e1411aa]{padding:%?16?% %?26?%}.chat-scroll-box .chat-item .product-box .info .price[data-v-5e1411aa]{font-size:%?36?%;color:var(--view-priceColor)}.chat-scroll-box .chat-item .product-box .info .price uni-text[data-v-5e1411aa]{font-size:%?28?%}.chat-scroll-box .chat-item .order-box[data-v-5e1411aa]{width:%?452?%;margin-left:%?22?%;background-color:#fff;border-radius:%?14?%}.chat-scroll-box .chat-item .order-box .title[data-v-5e1411aa]{padding:%?15?% %?20?%;font-size:%?26?%;color:#282828;border-bottom:1px solid #eceff8}.chat-scroll-box .chat-item .order-box .info[data-v-5e1411aa]{display:flex;padding:%?20?%}.chat-scroll-box .chat-item .order-box .info uni-image[data-v-5e1411aa]{width:%?124?%;height:%?124?%;border-radius:%?6?%}.chat-scroll-box .chat-item .order-box .info .product-info[data-v-5e1411aa]{flex:1;display:flex;flex-direction:column;justify-content:space-between;margin-left:%?16?%}.chat-scroll-box .chat-item .order-box .info .product-info .name[data-v-5e1411aa]{font-size:%?26?%}.chat-scroll-box .chat-item .order-box .info .product-info .price[data-v-5e1411aa]{font-size:%?30?%;color:var(--view-priceColor)}.chat-scroll-box .chat-item.right-box[data-v-5e1411aa]{flex-direction:row-reverse}.chat-scroll-box .chat-item.right-box .msg-box[data-v-5e1411aa]{margin-left:0;margin-right:%?22?%;background-color:#9cec60}.chat-scroll-box .chat-item.right-box .img-box[data-v-5e1411aa]{margin-left:0;margin-right:%?22?%}.chat-scroll-box .chat-item.right-box .product-box[data-v-5e1411aa]{margin-left:0;margin-right:%?22?%}.chat-scroll-box .chat-item.right-box .order-box[data-v-5e1411aa]{margin-left:0;margin-right:%?22?%}.chat-scroll-box .chat-item .em[data-v-5e1411aa]{margin:0}.broadcast-details_box[data-v-5e1411aa]{display:flex;background:#fff;border-radius:6px;padding:%?24?%}.broadcast_details_img[data-v-5e1411aa]{width:%?140?%;height:%?140?%;border-radius:8px;overflow:hidden;position:relative}.broadcast_details_img .goods-img[data-v-5e1411aa]{width:100%;height:100%}.broadcast_details_picBox[data-v-5e1411aa]{width:75%;margin-left:%?24?%}.broadcast_details_tit[data-v-5e1411aa]{font-size:%?28?%;color:#333;height:%?85?%;font-weight:800;line-height:%?40?%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-align:left!important}.broadcast_details_pic[data-v-5e1411aa]{font-size:%?36?%;color:var(--view-priceColor);text-align:left}.broadcast_details_pic_num[data-v-5e1411aa]{text-decoration:line-through;font-size:%?28?%;color:rgba(0,0,0,.5);margin-left:.1rem}.broadcast_details_btn[data-v-5e1411aa]{width:%?130?%;height:%?50?%;background:var(--view-theme);opacity:1;border-radius:%?125?%;color:#fff;font-size:%?24?%;text-align:center;line-height:%?50?%}.broadcast-details_num[data-v-5e1411aa]{width:100%;height:%?80?%;line-height:%?80?%;color:#000;font-size:%?26?%;display:flex;justify-content:space-between;background:#fff;border-bottom:1px dashed rgba(0,0,0,.2);padding:0 %?24?%}.day-box[data-v-5e1411aa]{font-size:%?24?%;color:#999;text-align:center;margin-bottom:%?36?%}',""]),t.exports=e}}]);